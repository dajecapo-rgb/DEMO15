<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Invitaci√≥n XV ¬∑ Cinem√°tica</title>

<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;700&family=Cormorant+Garamond:ital,wght@0,400;0,600;1,400;1,600&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">

<style>
:root{
  --gold:#c9a24a;
  --text:#1c1713;
  --ok:#2fbf66;
  --no:#d84b4b;
  --paper:url("https://raw.githubusercontent.com/dajecapo-rgb/DEMO15/refs/heads/main/textura_blanca.png");
}

*{box-sizing:border-box}
html,body{margin:0;padding:0}

body{
  font-family:Inter,system-ui,Arial,sans-serif;
  color:var(--text);
  background:
    radial-gradient(1000px 500px at 50% -10%, rgba(201,162,74,.10), transparent 60%),
    var(--paper);
  background-size:auto,cover;
}

.container{max-width:980px;margin:auto;padding:14px}

.card{
  background:
    linear-gradient(180deg,rgba(255,255,255,.80),rgba(255,255,255,.72)),
    var(--paper);
  border-radius:22px;
  padding:16px;
  margin:14px 0;
  box-shadow:0 16px 40px rgba(0,0,0,.15);
  border:1px solid rgba(0,0,0,.10);
  position:relative;
}

h2{
  font-family:"Cormorant Garamond",serif;
  font-style:italic;
  font-size:26px;
  text-align:center;
  margin:0 0 10px;
}

.small{font-size:13px;color:#4a423b;line-height:1.35}

/* ===== BOTONES TOP ===== */
.btnrow{
  display:flex;
  gap:10px;
  position:absolute;
  top:14px;left:14px;right:14px;
  z-index:5;
}
button,.btn{
  padding:11px;
  border-radius:14px;
  border:1px solid rgba(201,162,74,.9);
  background:linear-gradient(180deg,rgba(255,255,255,.75),rgba(255,255,255,.35));
  font-family:Inter,sans-serif;
  cursor:pointer;
  text-decoration:none;
  color:#2a241f;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap:8px;
}
.btnrow button{flex:1}

/* ===== INVITACI√ìN ===== */
.inviteWrap{
  position:relative;
  border-radius:18px;
  overflow:hidden;
  box-shadow:0 18px 42px rgba(0,0,0,.18);
}
.inviteWrap img{width:100%;display:block}
.inviteOverlay{
  position:absolute;inset:0;
  background:radial-gradient(60% 40% at 50% 30%,rgba(201,162,74,.10),transparent 60%);
  pointer-events:none;
}

/* CAJAS LATERALES */
.infoLeft,.infoRight{
  position:absolute;
  width:300px;
  top:50%;
  transform:translateY(-35%);
  text-align:center;
  font-family:"Playfair Display",serif;
  color:var(--gold);
}
.infoLeft{left:18px}
.infoRight{right:18px}

.overlayBox{
  background:
    linear-gradient(180deg,rgba(255,255,255,.85),rgba(255,255,255,.75)),
    var(--paper);
  border-radius:16px;
  padding:12px;
  min-height:132px;
  display:flex;
  flex-direction:column;
  justify-content:center;
  border:1px solid rgba(0,0,0,.10);
}

.invTextMain{font-size:20px;line-height:1.15}
.invTextSub{
  font-family:"Cormorant Garamond",serif;
  font-style:italic;
  margin-top:6px;
  color:#3b332d;
  font-size:18px;
}

/* BOT√ìN MAPS (regresa aqu√≠) */
.mapLink{
  margin-top:10px;
  width:100%;
  padding:10px 12px;
  border-radius:999px;
  border:1px solid rgba(201,162,74,.9);
  background:linear-gradient(180deg,rgba(255,255,255,.88),rgba(255,255,255,.50));
  text-decoration:none;
  color:#2a241f;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap:10px;
  font-family:Inter,sans-serif;
  font-weight:700;
  box-shadow:0 10px 18px rgba(0,0,0,.10);
}

/* ===== INFO ===== */
.grid2{display:grid;grid-template-columns:1fr 1fr;gap:12px}
@media(max-width:800px){ .grid2{grid-template-columns:1fr} }

.pill{
  padding:12px 14px;
  border-radius:16px;
  border:1px solid rgba(0,0,0,.10);
  background:rgba(255,255,255,.55);
}

/* ===== BOT√ìN FOTO ===== */
.btnFoto{
  width:100%;
  max-width:520px;
  margin:0 auto;
  padding:14px 16px;
  border-radius:16px;
  border:1px solid rgba(201,162,74,.95);
  background:linear-gradient(180deg,rgba(255,255,255,.85),rgba(255,255,255,.45));
  text-decoration:none;
  color:#2a241f;
  display:flex;
  align-items:center;
  justify-content:center;
  text-align:center;
  gap:10px;
  white-space:normal;
  word-break:break-word;
  line-height:1.25;
  font-weight:600;
}

/* ===== CUENTA REGRESIVA ===== */
.countWrap{margin:10px auto 14px;max-width:720px;text-align:center}
.countTitle{
  font-family:"Cormorant Garamond",serif;
  font-style:italic;
  font-size:22px;
  color:#3b332d;
  margin-bottom:10px;
}
.countGrid{display:grid;grid-template-columns:repeat(4,1fr);gap:10px}
@media(max-width:560px){ .countGrid{grid-template-columns:repeat(2,1fr)} }
.countBox{
  background:rgba(255,255,255,.55);
  border:1px solid rgba(0,0,0,.10);
  border-radius:16px;
  padding:12px 10px;
}
.countNum{
  font-family:"Playfair Display",serif;
  color:var(--gold);
  font-size:30px;
  line-height:1;
}
.countLab{
  margin-top:6px;
  font-size:12px;
  color:#4a423b;
  letter-spacing:.04em;
  text-transform:uppercase;
}

/* ===== FORM ===== */
label{font-size:13px}
input,select,textarea{
  width:100%;
  padding:12px;
  border-radius:12px;
  border:1px solid rgba(0,0,0,.12);
  background:rgba(255,255,255,.65);
}
textarea{min-height:90px}
.formGrid{display:grid;grid-template-columns:1fr 1fr;gap:12px}
@media(max-width:800px){ .formGrid{grid-template-columns:1fr} }

/* ===== TEL ROJO ===== */
.inputBad{
  border-color: rgba(216,75,75,.95) !important;
  box-shadow: 0 0 0 3px rgba(216,75,75,.15) !important;
}

/* ===== BOT√ìN GOOGLE CALENDAR ===== */
.btnCalendar{
  margin:12px auto 0;
  width:100%;
  max-width:420px;
  padding:13px 16px;
  border-radius:16px;
  border:1px solid rgba(201,162,74,.95);
  background:linear-gradient(180deg,rgba(255,255,255,.85),rgba(255,255,255,.45));
  text-decoration:none;
  color:#2a241f;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap:10px;
  font-weight:600;
}

/* ===== CIERRE: TEXTO DENTRO DEL ADORNO (sin maps aqu√≠) ===== */
.finalCard{ padding:14px; }
.finalOrn{
  position:relative;
  width:100%;
  border-radius:18px;
  overflow:hidden;
  border:1px solid rgba(0,0,0,.10);
  box-shadow:0 14px 34px rgba(0,0,0,.12);
}
.finalOrn img{width:100%;height:auto;display:block}
.finalOverlay{
  position:absolute;inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:18px;
}
.finalContent{
  width:min(720px, 92%);
  text-align:center;
}
.finalText{
  font-family:"Cormorant Garamond",serif;
  font-style:italic;
  font-size:20px;
  color:#3b332d;
  line-height:1.35;
  margin:0;
  text-shadow:0 1px 0 rgba(255,255,255,.55);
}
@media(max-width:720px){ .finalText{font-size:18px} }
@media(max-width:520px){ .finalOverlay{padding:14px} .finalText{font-size:17px} }

/* ===== FIX RESPONSIVO MOVIL ===== */
@media(max-width:640px){
  .btnrow{position:static;margin:10px 6px 12px;flex-direction:column}
  .btnrow button{width:100%}
  .infoLeft,.infoRight{position:static;transform:none;width:auto;margin:12px 8px 0}
}

footer{text-align:center;font-size:12px;color:#555;margin:18px 0}
</style>
</head>

<body>
<div class="container">

<!-- INVITACI√ìN -->
<div class="card">
  <div class="inviteWrap">

    <div class="btnrow">
      <button id="btnVideo" type="button">‚ñ∂ Ver video</button>
      <button id="btnMusic" type="button">üéµ M√∫sica: ON</button>
      <button id="btnVoice" type="button">üîä Invitaci√≥n hablada</button>
    </div>

    <img src="https://raw.githubusercontent.com/dajecapo-rgb/DEMO15/refs/heads/main/FOTO%20DEMO.png" alt="Invitaci√≥n XV">
    <div class="inviteOverlay"></div>

    <div class="infoLeft">
      <div class="overlayBox">
        <div class="invTextMain">S√°bado 20 de junio de 2026</div>
        <div class="invTextSub">7:00 PM</div>
      </div>
    </div>

    <div class="infoRight">
      <div class="overlayBox">
        <div class="invTextMain">La Casa de Piedra</div>
        <div class="invTextSub">Cholul, M√©rida</div>
        <a class="mapLink" id="mapsLink" target="_blank" rel="noopener">üìç Abrir ubicaci√≥n en Maps</a>
      </div>
    </div>

  </div>
</div>

<!-- INFO -->
<div class="card">
  <h2>Informaci√≥n</h2>

  <div class="countWrap" aria-label="Cuenta regresiva">
    <div class="countTitle" id="countTitle">Faltan‚Ä¶</div>
    <div class="countGrid">
      <div class="countBox"><div class="countNum" id="cdDays">0</div><div class="countLab">D√≠as</div></div>
      <div class="countBox"><div class="countNum" id="cdHours">00</div><div class="countLab">Horas</div></div>
      <div class="countBox"><div class="countNum" id="cdMins">00</div><div class="countLab">Min</div></div>
      <div class="countBox"><div class="countNum" id="cdSecs">00</div><div class="countLab">Seg</div></div>
    </div>
  </div>

  <div class="grid2">
    <div class="pill">üëó <b>C√≥digo de vestimenta:</b> Formal</div>
    <div class="pill">üñ§ <b>Tem√°tica:</b> Cruella De Vil</div>
  </div>

  <div style="margin-top:12px" class="pill">
    <b>Padres:</b> Alejandro Montoya ¬∑ Fernanda Rivera
  </div>

  <div style="margin-top:10px" class="pill">
    <b>Padrinos:</b> Ricardo Salgado ¬∑ Mariana Torres
  </div>

  <div style="margin-top:14px;text-align:center">
    <a class="btnFoto" id="btnFotoRedes" target="_blank" rel="noopener">üì∏ ¬°Quiero mi foto para subir a redes!</a>
    <div class="small" style="margin-top:8px">
      La familia te enviar√° una foto contigo y la quincea√±era.
    </div>
  </div>
</div>

<!-- RSVP -->
<div class="card">
  <h2>Confirmaci√≥n</h2>

  <form id="rsvpForm" novalidate>
    <div class="formGrid">
      <div>
        <label>Nombre *</label>
        <input id="nombre" required>
      </div>
      <div>
        <label>¬øAsistir√°s? *</label>
        <select id="asistencia" required>
          <option value="">Selecciona</option>
          <option>S√≠</option>
          <option>No</option>
        </select>
      </div>
      <div>
        <label>Acompa√±antes *</label>
        <input id="acompanantes" type="number" value="0" min="0">
      </div>
      <div>
        <label>Tel√©fono (10 d√≠gitos) *</label>
        <input id="telefono" required inputmode="numeric" autocomplete="tel" maxlength="10" placeholder="Ej. 9991234567">
      </div>
    </div>

    <div style="margin-top:12px">
      <label>Mensaje</label>
      <textarea id="mensaje"></textarea>
    </div>

    <div style="margin-top:12px;display:flex;gap:10px;align-items:center;flex-wrap:wrap">
      <button type="submit" id="btnSend">ENVIAR</button>
      <div id="respuesta" class="small"></div>
    </div>
  </form>

  <div style="text-align:center;margin-top:6px">
    <a class="btnCalendar" id="btnCalendar" target="_blank" rel="noopener">üìÖ Agregar a Google Calendar</a>
    <div class="small" style="margin-top:6px">(Tip: despu√©s de confirmar, agr√©galo para que no se te pase)</div>
  </div>
</div>

<!-- ANUNCIO FINAL -->
<div class="card">
  <div class="small">¬øTe gust√≥ esta experiencia? Podemos dise√±arla para tu evento.</div>
  <div style="margin-top:10px;text-align:center">
    <a class="btn" id="waVenta" target="_blank" rel="noopener">‚ú® ¬°Pide tu invitaci√≥n aqu√≠!</a>
  </div>
</div>

<!-- CIERRE (adorno + texto dentro) -->
<div class="card finalCard">
  <div class="finalOrn" aria-label="Cierre con adorno">
    <img src="https://raw.githubusercontent.com/dajecapo-rgb/DEMO15/refs/heads/main/adornofinal.png" alt="Adorno final">
    <div class="finalOverlay">
      <div class="finalContent">
        <div class="finalText">
          Gracias por ser parte de este d√≠a tan especial.<br>
          Nos vemos para celebrar juntos ‚ú®
        </div>
      </div>
    </div>
  </div>
</div>

<footer>¬© 2026 Valentina Montoya Rivera ¬∑ DEMO</footer>

</div>

<!-- Audios -->
<audio id="music" src="https://github.com/dajecapo-rgb/DEMO15/raw/refs/heads/main/1Quince%20Primaveras.mp3" preload="metadata"></audio>
<audio id="voice" src="https://github.com/dajecapo-rgb/DEMO15/raw/refs/heads/main/audio-accesible.wav" preload="metadata"></audio>

<script>
/* ===== CONFIG EVENTO ===== */
const EVENT_LOCAL = { y: 2026, mo: 5, d: 20, h: 19, mi: 0 }; // 20 junio 2026 7:00 PM
const EVENT_TITLE = "XV A√±os ¬∑ Valentina Montoya Rivera";
const EVENT_LOCATION = "La Casa de Piedra, Cholul, M√©rida";

/* ===== CONFIG EXISTENTE ===== */
const ENDPOINT="https://script.google.com/macros/s/AKfycbxxsg6OEj93oVU77iakNMlCNAnFlfgURKsqvReO7eek-PE6xGbBpGEHOewx2q-BXf2_hQ/exec";
const YT="https://youtube.com/shorts/6ZZpWReNyY8";
const WA_FOTO="529991327488";
const WA_VENTA="529991832064";

/* ===== REFERENCIAS ===== */
const elBtnVideo = document.getElementById("btnVideo");
const elBtnMusic = document.getElementById("btnMusic");
const elBtnVoice = document.getElementById("btnVoice");
const elBtnFoto  = document.getElementById("btnFotoRedes");
const elWaVenta  = document.getElementById("waVenta");
const elMusic    = document.getElementById("music");
const elVoice    = document.getElementById("voice");
const elCalendar = document.getElementById("btnCalendar");
const elMapsLink = document.getElementById("mapsLink");

const cdDays  = document.getElementById("cdDays");
const cdHours = document.getElementById("cdHours");
const cdMins  = document.getElementById("cdMins");
const cdSecs  = document.getElementById("cdSecs");
const countTitle = document.getElementById("countTitle");

/* ===== LINKS ===== */
elBtnVideo.addEventListener("click", ()=> window.open(YT, "_blank", "noopener"));

elBtnFoto.href =
  "https://wa.me/" + WA_FOTO +
  "?text=" + encodeURIComponent("Hola, quiero mi foto para subir a redes. Soy invitado(a) de la XV y me gustar√≠a que me env√≠en mi foto con la quincea√±era, por favor.");

elWaVenta.href =
  "https://wa.me/" + WA_VENTA +
  "?text=" + encodeURIComponent("Hola, me interesa una invitaci√≥n web cinematogr√°fica.");

elMapsLink.href =
  "https://www.google.com/maps/search/?api=1&query=" + encodeURIComponent(EVENT_LOCATION);

/* ===== AUDIO ===== */
let musicOn = false;
let savedVol = 0.9;

function updateMusicLabel(){
  elBtnMusic.textContent = "üéµ M√∫sica: " + (musicOn ? "OFF" : "ON");
}
updateMusicLabel();

elBtnMusic.addEventListener("click", ()=>{
  if(!musicOn){
    elMusic.volume = savedVol;
    elMusic.play().catch(()=>{});
    musicOn = true;
  }else{
    elMusic.pause();
    musicOn = false;
  }
  updateMusicLabel();
});

elBtnVoice.addEventListener("click", ()=>{
  if(elVoice.paused){
    if(musicOn){
      savedVol = elMusic.volume;
      elMusic.volume = 0.18;
    }
    elVoice.play().catch(()=>{});
    elBtnVoice.textContent = "‚èπ Detener invitaci√≥n hablada";
  }else{
    elVoice.pause();
    if(musicOn) elMusic.volume = savedVol;
    elBtnVoice.textContent = "üîä Invitaci√≥n hablada";
  }
});

elVoice.addEventListener("ended", ()=>{
  if(musicOn) elMusic.volume = savedVol;
  elBtnVoice.textContent = "üîä Invitaci√≥n hablada";
});

/* ===== CUENTA REGRESIVA ===== */
const eventDate = new Date(EVENT_LOCAL.y, EVENT_LOCAL.mo, EVENT_LOCAL.d, EVENT_LOCAL.h, EVENT_LOCAL.mi, 0);
function pad2(n){ return String(n).padStart(2,"0"); }

function tickCountdown(){
  const now = new Date();
  const diff = eventDate - now;

  if(diff <= 0){
    cdDays.textContent = "0";
    cdHours.textContent = "00";
    cdMins.textContent = "00";
    cdSecs.textContent = "00";
    countTitle.textContent = "¬°Hoy es el gran d√≠a!";
    return;
  }

  const totalSeconds = Math.floor(diff/1000);
  const days = Math.floor(totalSeconds / 86400);
  const hours = Math.floor((totalSeconds % 86400) / 3600);
  const mins = Math.floor((totalSeconds % 3600) / 60);
  const secs = totalSeconds % 60;

  cdDays.textContent = days;
  cdHours.textContent = pad2(hours);
  cdMins.textContent = pad2(mins);
  cdSecs.textContent = pad2(secs);
}
tickCountdown();
setInterval(tickCountdown, 1000);

/* ===== GOOGLE CALENDAR ===== */
function toUTCStringForGCal(dt){
  const y = dt.getUTCFullYear();
  const mo = String(dt.getUTCMonth()+1).padStart(2,"0");
  const d = String(dt.getUTCDate()).padStart(2,"0");
  const h = String(dt.getUTCHours()).padStart(2,"0");
  const mi = String(dt.getUTCMinutes()).padStart(2,"0");
  const s = String(dt.getUTCSeconds()).padStart(2,"0");
  return `${y}${mo}${d}T${h}${mi}${s}Z`;
}
const endDate = new Date(eventDate.getTime() + (4*60*60*1000));

elCalendar.href =
  "https://calendar.google.com/calendar/render?action=TEMPLATE" +
  "&text=" + encodeURIComponent(EVENT_TITLE) +
  "&details=" + encodeURIComponent("Invitaci√≥n web cinemat√°tica (DEMO).") +
  "&location=" + encodeURIComponent(EVENT_LOCATION) +
  "&dates=" + encodeURIComponent(toUTCStringForGCal(eventDate) + "/" + toUTCStringForGCal(endDate));

/* ===== VALIDACI√ìN TEL√âFONO ===== */
const telInput = document.getElementById("telefono");
function cleanTel(v){ return (v||"").replace(/\D/g,'').slice(0,10); }
function updateTelStyle(){
  const tel = cleanTel(telInput.value);
  telInput.value = tel;
  if(tel.length === 0){
    telInput.classList.remove("inputBad");
    return;
  }
  if(tel.length !== 10) telInput.classList.add("inputBad");
  else telInput.classList.remove("inputBad");
}
telInput.addEventListener("input", updateTelStyle);

/* ===== RSVP -> SHEETS ===== */
const form = document.getElementById("rsvpForm");
const respuesta = document.getElementById("respuesta");
const btnSend = document.getElementById("btnSend");

const nombre = document.getElementById("nombre");
const asistencia = document.getElementById("asistencia");
const acompanantes = document.getElementById("acompanantes");
const telefono = document.getElementById("telefono");
const mensaje = document.getElementById("mensaje");

form.addEventListener("submit", async (e)=>{
  e.preventDefault();
  respuesta.textContent = "";

  const tel = cleanTel(telefono.value);

  if(tel.length !== 10){
    telefono.classList.add("inputBad");
    respuesta.textContent = "‚ö†Ô∏è El tel√©fono debe tener exactamente 10 d√≠gitos.";
    telefono.focus();
    return;
  }
  if(!nombre.value.trim()){
    respuesta.textContent = "‚ö†Ô∏è Escribe tu nombre.";
    nombre.focus();
    return;
  }
  if(!asistencia.value){
    respuesta.textContent = "‚ö†Ô∏è Selecciona si asistir√°s.";
    asistencia.focus();
    return;
  }

  btnSend.disabled = true;
  btnSend.style.opacity = ".6";

  const payload = {
    timestamp: new Date().toISOString(),
    nombre_invitado: (nombre.value || "").trim(),
    asistencia: asistencia.value,
    numero_acompanantes: acompanantes.value,
    telefono: tel,
    mensaje: (mensaje.value || "").trim(),
    origen: "XV_DEMO",
    tema: "CRUELLA_DE_VIL",
    origen_envio: "WEB_INVITACION"
  };

  try{
    await fetch(ENDPOINT,{
      method:"POST",
      headers:{"Content-Type":"text/plain;charset=utf-8"},
      body: JSON.stringify(payload)
    });
    respuesta.textContent = "¬°Gracias por confirmar!";
    form.reset();
    acompanantes.value = 0;
    telefono.classList.remove("inputBad");
  }catch{
    respuesta.textContent = "Error al enviar. Intenta de nuevo.";
  }finally{
    btnSend.disabled = false;
    btnSend.style.opacity = "1";
  }
});
</script>

</body>
</html>
